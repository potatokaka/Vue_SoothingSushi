(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-649d480f"],{9130:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),l={class:"container"},o=Object(n["h"])("h2",{class:"my-3 text-gray-200"},"Order List",-1),a={class:"table mt-4 text-gray-200"},r=Object(n["h"])("thead",{class:"text-gray-600"},[Object(n["h"])("tr",null,[Object(n["h"])("th",null,"Purchase Time"),Object(n["h"])("th",null,"Email"),Object(n["h"])("th",null,"Item"),Object(n["h"])("th",null,"Price"),Object(n["h"])("th",null,"Paid"),Object(n["h"])("th",null,"Edit")])],-1),d=["textContent"],s={class:"list-unstyled"},i={class:"inline-block me-3"},b={class:"text-right"},O={class:"form-check form-switch"},u=["id","onUpdate:modelValue","onChange"],h=["for"],j={key:0},p={key:1},m={class:"btn-group"},f=["onClick"],g=["onClick"];function y(t,e,c,y,k,v){var w=Object(n["K"])("Pagination"),C=Object(n["K"])("ModalOrder"),x=Object(n["K"])("ModalDelete");return Object(n["A"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",l,[o,Object(n["h"])("table",a,[r,Object(n["h"])("tbody",null,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["I"])(k.orders,(function(e){return Object(n["A"])(),Object(n["g"])(n["a"],{key:e.id},[k.orders.length?(Object(n["A"])(),Object(n["g"])("tr",{key:0,class:Object(n["s"])({"text-secondary":!e.is_paid})},[Object(n["h"])("td",null,Object(n["N"])(e.create_at),1),Object(n["h"])("td",null,[e.user?(Object(n["A"])(),Object(n["g"])("span",{key:0,textContent:Object(n["N"])(e.user.email)},null,8,d)):Object(n["f"])("",!0)]),Object(n["h"])("td",null,[Object(n["h"])("ul",s,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["I"])(e.products,(function(t){return Object(n["A"])(),Object(n["g"])("li",{key:t.id},[Object(n["h"])("span",i,Object(n["N"])(t.product.title),1),Object(n["j"])(" Amount："+Object(n["N"])(t.qty)+" "+Object(n["N"])(t.product.unit),1)])})),128))])]),Object(n["h"])("td",b,Object(n["N"])(t.$filters.currency(e.total)),1),Object(n["h"])("td",null,[Object(n["h"])("div",O,[Object(n["Z"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return v.updateOrder(e)}},null,40,u),[[n["Q"],e.is_paid]]),Object(n["h"])("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?(Object(n["A"])(),Object(n["g"])("span",j,"Paid")):(Object(n["A"])(),Object(n["g"])("span",p,"Unpaid"))],8,h)])]),Object(n["h"])("td",null,[Object(n["h"])("div",m,[Object(n["h"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(t){return v.openOrderModal(e)}}," View ",8,f),Object(n["h"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return v.openDelOrderModal(e)}}," Delete ",8,g)])])],2)):Object(n["f"])("",!0)],64)})),128))])]),Object(n["k"])(w,{pages:k.pagination,onEmitPages:v.getOrders},null,8,["pages","onEmitPages"])]),Object(n["k"])(C,{"order-data":k.tempOrder,onEmitUpdateOrder:v.updateOrder,ref:"modalOrder"},null,8,["order-data","onEmitUpdateOrder"]),Object(n["k"])(x,{"product-data":k.tempOrder,onEmitDeleteProduct:v.deleteOrder,ref:"modalDelete"},null,8,["product-data","onEmitDeleteProduct"])],64)}var k=c("5530"),v=(c("99af"),c("1799")),w=(c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),C={class:"modal-dialog modal-xl",role:"document"},x={class:"modal-content border-0"},A=Object(n["h"])("div",{class:"modal-header bg-dark text-white"},[Object(n["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(n["h"])("span",null,"訂單細節")]),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),N={class:"modal-body"},$={class:"row"},M={class:"col-md-4"},D=Object(n["h"])("h3",null,"用戶資料",-1),_={class:"table"},B={key:0},E=Object(n["h"])("th",{style:{width:"100px"}},"姓名",-1),P=Object(n["h"])("th",null,"Email",-1),U=Object(n["h"])("th",null,"電話",-1),S=Object(n["h"])("th",null,"地址",-1),F={class:"col-md-8"},I=Object(n["h"])("h3",null,"訂單細節",-1),V={class:"table"},K=Object(n["h"])("th",{style:{width:"100px"}},"訂單編號",-1),L=Object(n["h"])("th",null,"下單時間",-1),q=Object(n["h"])("th",null,"付款時間",-1),J={key:0},Q={key:1},T=Object(n["h"])("th",null,"付款狀態",-1),Z={key:0,class:"text-success"},X={key:1,class:"text-muted"},z=Object(n["h"])("th",null,"總金額",-1),G=Object(n["h"])("h3",null,"選購商品",-1),H={class:"table"},R=Object(n["h"])("thead",null,[Object(n["h"])("tr")],-1),W={class:"text-end"},Y={class:"d-flex justify-content-end"},tt={class:"form-check"},et={class:"form-check-label",for:"flexCheckDefault"},ct={key:0},nt={key:1},lt={class:"modal-footer"},ot=Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function at(t,e,c,l,o,a){return Object(n["A"])(),Object(n["g"])("div",w,[Object(n["h"])("div",C,[Object(n["h"])("div",x,[A,Object(n["h"])("div",N,[Object(n["h"])("div",$,[Object(n["h"])("div",M,[D,Object(n["h"])("table",_,[o.tempOrder.user?(Object(n["A"])(),Object(n["g"])("tbody",B,[Object(n["h"])("tr",null,[E,Object(n["h"])("td",null,Object(n["N"])(o.tempOrder.user.name),1)]),Object(n["h"])("tr",null,[P,Object(n["h"])("td",null,Object(n["N"])(o.tempOrder.user.email),1)]),Object(n["h"])("tr",null,[U,Object(n["h"])("td",null,Object(n["N"])(o.tempOrder.user.tel),1)]),Object(n["h"])("tr",null,[S,Object(n["h"])("td",null,Object(n["N"])(o.tempOrder.user.address),1)])])):Object(n["f"])("",!0)])]),Object(n["h"])("div",F,[I,Object(n["h"])("table",V,[Object(n["h"])("tbody",null,[Object(n["h"])("tr",null,[K,Object(n["h"])("td",null,Object(n["N"])(o.tempOrder.id),1)]),Object(n["h"])("tr",null,[L,Object(n["h"])("td",null,Object(n["N"])(t.$filters.date(o.tempOrder.create_at)),1)]),Object(n["h"])("tr",null,[q,Object(n["h"])("td",null,[o.tempOrder.paid_date?(Object(n["A"])(),Object(n["g"])("span",J,Object(n["N"])(t.$filters.date(o.tempOrder.paid_date)),1)):(Object(n["A"])(),Object(n["g"])("span",Q,"時間不正確"))])]),Object(n["h"])("tr",null,[T,Object(n["h"])("td",null,[o.tempOrder.is_paid?(Object(n["A"])(),Object(n["g"])("strong",Z,"已付款")):(Object(n["A"])(),Object(n["g"])("span",X,"尚未付款"))])]),Object(n["h"])("tr",null,[z,Object(n["h"])("td",null,Object(n["N"])(o.tempOrder.total),1)])])]),G,Object(n["h"])("table",H,[R,Object(n["h"])("tbody",null,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["I"])(o.tempOrder.products,(function(e){return Object(n["A"])(),Object(n["g"])("tr",{key:e.id},[Object(n["h"])("th",null,Object(n["N"])(e.product.title),1),Object(n["h"])("td",null,Object(n["N"])(e.qty)+" / "+Object(n["N"])(e.product.unit),1),Object(n["h"])("td",W,Object(n["N"])(t.$filters.currency(e.final_total)),1)])})),128))])]),Object(n["h"])("div",Y,[Object(n["h"])("div",tt,[Object(n["Z"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.tempOrder.is_paid=t})},null,512),[[n["Q"],o.tempOrder.is_paid]]),Object(n["h"])("label",et,[o.tempOrder.is_paid?(Object(n["A"])(),Object(n["g"])("span",ct,"已付款")):(Object(n["A"])(),Object(n["g"])("span",nt,"未付款"))])])])])])]),Object(n["h"])("div",lt,[ot,Object(n["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(e){return t.$emit("emit-update-order",o.tempOrder)})}," 修改付款狀態 ")])])])],512)}var rt=c("e0ae"),dt={props:["orderData"],emits:["emitUpdateOrder"],mixins:[rt["a"]],data:function(){return{tempOrder:{},bsModal:""}},watch:{orderData:function(){this.tempOrder=this.orderData}}},st=c("6b0d"),it=c.n(st);const bt=it()(dt,[["render",at]]);var Ot=bt,ut=c("86a0"),ht={components:{Pagination:v["a"],ModalOrder:Ot,ModalDelete:ut["a"]},data:function(){return{orders:[],pagination:{},tempOrder:{}}},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter118","/admin/orders?page=").concat(e)).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination})).catch((function(e){t.$swal({toast:!0,position:"bottom-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,showCloseButton:!0,iconColor:"#e8584d",timer:3e4})}))},updateOrder:function(t){var e=this;this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter118","/admin/order/").concat(t.id),{data:t}).then((function(t){e.$swal({toast:!0,position:"bottom-end",icon:"success",title:t.data.message,showConfirmButton:!1,showCloseButton:!0,iconColor:"#FFBCAA",timer:3e3}),e.$refs.modalOrder.closeModal(),e.getOrders()})).catch((function(t){e.$swal({toast:!0,position:"bottom-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,showCloseButton:!0,iconColor:"#e8584d",timer:3e4})}))},deleteOrder:function(t){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("filter118","/admin/order/").concat(t)).then((function(t){e.$swal({toast:!0,position:"bottom-end",icon:"success",title:t.data.message,showConfirmButton:!1,showCloseButton:!0,iconColor:"#FFBCAA",timer:3e3}),e.$refs.modalDelete.closeModal(),e.getOrders()})).catch((function(t){e.$swal({toast:!0,position:"bottom-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,showCloseButton:!0,iconColor:"#e8584d",timer:3e4})}))},openOrderModal:function(t){this.tempOrder=Object(k["a"])({},t),this.$refs.modalOrder.openModal()},openDelOrderModal:function(t){this.tempOrder=t,this.$refs.modalDelete.openModal()}},mounted:function(){this.getOrders()}};const jt=it()(ht,[["render",y]]);e["default"]=jt},b0c0:function(t,e,c){var n=c("83ab"),l=c("5e77").EXISTS,o=c("e330"),a=c("9bf2").f,r=Function.prototype,d=o(r.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=o(s.exec),b="name";n&&!l&&a(r,b,{configurable:!0,get:function(){try{return i(s,d(this))[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-649d480f.c997e90b.js.map